<link href="${base}/css/teacherCenter/releaseTest.css" rel="stylesheet" type="text/css">
<script src="${base}/js/teachercenter/releaseTest/releaseTest.js" type="text/javascript"></script>
<script src="${base}/js/ajaxfileupload.js" type="text/javascript"></script>
<script src="${base}/js/My97DatePicker/WdatePicker.js" type="text/javascript"></script>


<div class="topBox">
          <div class="menuBtn" style="cursor:auto"></div>
          <div class="crumbs">你所在的位置：<span>发布试题</span></div>
</div>
        <div class="main" >
          <div class="main-title"><h3>发布练习</h3></div>
          <div class="releaseTest mt20">
          <form action="${base}/teacherCenter/upload/" method="post" encType="multipart/form-data"  id="releaseTestForm" name="releaseTestForm" onsubmit="return myFormCheck(this)">
            <div class="form-row">
                <div class="label"><label><span style="color: red;">*&nbsp;</span>课程名称：</label></div>
                <div class="input">
					<select id="courseId" name="courseId" onchange="getSection('z')"
						onfocus="doOnFocus(this);">
						<option value="">--课程名称--</option>
						 [#list courselist as courses]
						   <option value="${courses.courseId!}">${courses.courseName!}</option> 
						 [/#list]
					</select>
				</div>
            </div>
            <div class="form-row">
                <div class="label"><label><span style="color: red;">*&nbsp;</span>题目分类：</label></div>
                <div class="input typeTab">
                  <input type="radio" value="2" name="examType" checked class="mr10"><span class="mr20">课堂练习</span>
                  <input type="radio" value="3" name="examType" class="mr10"><span class="mr20">课堂作业</span>
                  <input type="radio" value="1" name="examType" class="mr10"><span>课堂考试</span>
                </div>
            </div>
            <div class="formbody">
              <div class="formbodyTab ">
                <div class="form-row">
                    <div class="label"><label><span style="color: red;">*&nbsp;</span>选择章节：</label></div>
                    <div class="input">
                      <select id="toZ" name="toZ" onChange="getSection('j')" onfocus="doOnFocus(this);">
                        <option value="">请选择章</option>
                      </select>
                      <select id="toJ" name="toJ" onfocus="doOnFocus(this);" onChange="getSection()">
                        <option value="">请选择节</option>
                      </select>
                    </div>
                </div>
                <div class="tab">
                  <ul id="quickNav">
                    <li class="current"><a href="javascript:;" class="jobInfo">保存选择题</a></li>
                  </ul>
                </div>
                <div class="tabCon">
                  <div class="tabBox pad20 ">
                    <div style="line-height:32px; height:32px; vertical-align:middle" >
                     <span class="btn btn-small btn-default btn-file fl">
                        <span style="color: red;">*&nbsp;</span>
                        <span class="fileupload-new">上传题目</span>
                        <input id="lxfile" type="file" name="file" class="margin-none btn-file-input" onchange="uploadFile(1)">
                     </span>
                     <span class="validation" id="lxExcelCheck"><i class="tip-icon"></i><span class="tip">请先下载excel模板</span></span>
                    </div>
                    <ul class="stepList clearfix">
                      <li class="step first"><a href="${base}/teacherCenter/download/?excelName=questions.xlsx" title="请先下载excel模板">1.下载模板</a></li>
                      <li class="step second">2.填写模板文件</li>
                      <li class="step third">3.上传题目</li>
                    </ul>
                    <!-- 练习选择题上传后文件的显示 -->
                    <ul id="lxSelectUl" class="itemList">
                          <input type="hidden" id="lxTempExcel" value=""/>
                    </ul>
                    
                  </div>
                </div>
              </div>
              
              <!-----------------------------课堂作业-------------------------------->
              <div class="formbodyTab hide">
             	<div class="form-row">
                    <div class="label"><label><span style="color: red;">*&nbsp;</span>作业名称：</label></div>
                    <div class="input">
                      <input type="text" id="taskName" name="taskName" style="width:350px" onchange="checkTaskName()" placeholder="请输入作业名称" maxlength="20"/>
                    </div>
                </div>
                <div class="form-row">
                 <div class="input">
                       <textarea id="examInstruction" name="examInstruction" class="large"  rows="4" placeholder="请输入说明"></textarea>
		                <font style="color: gray;">
		                   <span class="textCount">0/500字</span>
		                </font>
                </div>
                </div>
               <!--  <div class="form-row">
                    <div class="label"><label>截止时间：</label></div>
                    <div class="input">
                      <input id="taskLastTime" name="taskLastTime" class="Wdate" type="text" onfocus="WdatePicker({minDate:'%y-%M-{%d+1}'})"/>
                    </div>
                </div> -->
               <div class="tab">
                  <ul id="quickNav">
                    <li class="current"><a href="javascript:;" class="jobInfo">保存选择题</a></li>
                    <li><a href="javascript:;" class="jobInfo">保存主观题</a></li>
                  </ul>
                </div>
                <div class="tabCon">
                  <div class="tabBox pad20 ">
                    <div style="line-height:32px; height:32px; vertical-align:middle" >
                     <span class="btn btn-small btn-default btn-file fl">
                        <span style="color: red;">*&nbsp;</span>
                        <span class="fileupload-new">上传题目</span>
                        <input id="zyfile" type="file" name="file" class="margin-none btn-file-input" onchange="uploadFile(2)">
                     </span>
                     <span class="validation" id="zyExcelCheck"><i class="tip-icon"></i><span class="tip">请先下载excel模板</span></span>
                    </div>
                    <ul class="stepList clearfix">
                      <li class="step first"><a href="${base}/teacherCenter/download/?excelName=questions.xlsx" title="请先下载excel模板">1.下载模板</a></li>
                      <li class="step second">2.填写模板文件</li>
                      <li class="step third">3.上传题目</li>
                    </ul>
                    <!-- 作业选择题上传后文件的显示 -->
                    <ul id="zySelectUl" class="itemList">
                          <input type="hidden" id="zyTempExcel" value=""/>
                    </ul>
                  </div>
                  <div class="tabBox pad20 hide">
                    <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>题目：</label></div>
                      <div class="input">
                        <textarea id="taskContent" name="taskContent" class="large" rows="4" placeholder="请输入题目" onchange="checkWork('task')"></textarea>
		                <font style="color: gray;">
		                   <span class="textCount">0/500字</span>
		                </font>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>答案：</label></div>
                      <div class="input">
                        <textarea id="taskAnswer" name="taskAnswer" class="large" rows="4" placeholder="请输入答案" onchange="checkAnswer('task')"></textarea>
                         <font style="color: gray;">
		                   <span class="textCount">0/500字</span>
		                 </font>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>分数：</label></div>
                      <div class="input">
                        <input id="taskScore" name="taskScore" class="small" placeholder="请定义分数" onchange="checkScore('task')" onKeyUp="this.value=this.value.replace(/[^\.\d]/g,'');this.value=this.value.replace('.','');"/>
                      </div>
                    </div>
                    
                    <div class="form-button-bar">
                      <button type="button" onclick="addQuestion('task')" class="btn btn-primary btn-small secondStep">保存题目</button>
                    </div>
                     <ul id="ulTwo" class="itemList">
                          
                     </ul>
                  </div>
                </div>
              </div>
              
              <!-----------------------------课堂考试-------------------------------->
              <div class="formbodyTab hide">
              <!--   <div class="form-row">
                    <div class="label"><label>截止时间：</label></div>
                    <div class="input">
                      <input id="ksLastTime" name="ksLastTime" class="Wdate" type="text" onfocus="WdatePicker({minDate:'%y-%M-{%d+1}'})"/>
                    </div>
                </div> -->
                 <div class="tab">
                  <ul id="quickNav">
                    <li class="current"><a href="javascript:;" class="jobInfo">保存选择题</a></li>
                    <li><a href="javascript:;" class="jobInfo">保存主观题</a></li>
                  </ul>
                </div>
                <div class="tabCon">
                  <div class="tabBox pad20 ">
                    <div style="line-height:32px; height:32px; vertical-align:middle" >
                     <span class="btn btn-small btn-default btn-file fl">
                        <span style="color: red;">*&nbsp;</span>
                        <span class="fileupload-new">上传题目</span>
                        <input  id="ksfile" type="file" name="file" class="margin-none btn-file-input" onchange="uploadFile(3)">
                     </span>
                     <span class="validation" id="ksExcelCheck"><i class="tip-icon"></i><span class="tip">请先下载excel模板</span></span>
                    </div>
                    <ul class="stepList clearfix">
                      <li class="step first"><a href="${base}/teacherCenter/download/?excelName=questions.xlsx" title="请先下载excel模板">1.下载模板</a></li>
                      <li class="step second">2.填写模板文件</li>
                      <li class="step third">3.上传题目</li>
                    </ul>
                    <!-- 考试选择题上传后文件的显示 -->
                    <ul id="ksSelectUl" class="itemList">
                          <input type="hidden" id="ksTempExcel" value=""/>
                    </ul>
                  </div>
                  <div class="tabBox pad20 hide">
                      <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>题目：</label></div>
                      <div class="input">
                        <textarea id="examContent" name="examContent" class="large" rows="4" placeholder="请输入题目" onchange="checkWork('exam')"></textarea>
                         <font style="color: gray;">
		                   <span class="textCount">0/500字</span>
		                 </font>
                      </div>
                    </div>
                    <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>答案：</label></div>
                      <div class="input">
                        <textarea id="examAnswer" name="examAnswer" class="large" rows="4" placeholder="请输入答案" onchange="checkAnswer('exam')"></textarea>
                         <font style="color: gray;">
		                   <span class="textCount">0/500字</span>
		                 </font>
                       </div>
                    </div>
                    <div class="form-row">
                      <div class="label"><label><span style="color: red;">*&nbsp;</span>分数：</label></div>
                      <div class="input">
                        <input id="examScore" name="examScore" class="small" placeholder="请定义分数" onchange="checkScore('exam')" onKeyUp="this.value=this.value.replace(/[^\.\d]/g,'');this.value=this.value.replace('.','');"/>
                      </div>
                    </div>
                    <div class="form-button-bar">
                      <button type="button" onclick="addQuestion('exam')" class="btn btn-primary btn-small secondStep">保存题目</button>
                    </div>
                    <ul id="ulThree" class="itemList">
                    
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            </form>
            <div align="center" class="mt10 pt10" style="border-top:1px dashed #d7d7d7;">
               <button type="button" class="btn btn-primary btn-small secondStep" onclick="checkIsFill();">发布试题</button>
            </div>
          </div>
        </div>
        <div class="clear"></div>

      <div class="clear"></div>
 
<script language="JavaScript" type="text/javascript">
var type='${type!}';

$(function(){
	var $tabinput = $(".typeTab input"),
		$formbodyTab = $(".formbodyTab"),
		$index;

	$tabinput.click(function(){
		$(this).change();
		$index = $tabinput.index($(this));
		$formbodyTab.eq($index).show().siblings().hide();
		
		if($index==0){
			$(".main-title").find("h3").html("发布练习");
		}else if($index==1){
			$(".main-title").find("h3").html("发布作业");
		}else{
			$(".main-title").find("h3").html("发布考试");
		}
	});
	

	var $li = $(".tab li"),
		$content = $(".tabBox"),
		$index;

	$li.click(function(){
		$(this).addClass("current").siblings().removeClass('current');
		$index = $li.index($(this));
		$content.eq($index).show().siblings().hide();
	});
    if(type!=''){
			$("input[type=radio][value="+type+"]").click();
    };
})

</script>
</body>
</html>
